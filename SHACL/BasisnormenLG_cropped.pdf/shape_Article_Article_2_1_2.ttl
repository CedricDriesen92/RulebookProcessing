@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix fro: <https://ontology.firebim.be/ontology/fro#> .
@prefix fbo: <http://www.firebim.org/ontologies/FBO#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .

<https://ontology.firebim.be/ontology/fro#Shape_Article_2_1_2>
    a sh:NodeShape ;
    sh:targetClass fbo:Compartment ;
    sh:message "Het compartiment voldoet niet aan de hoogtevereisten van Artikel 2.1.2. Een compartiment mag zich in principe slechts over één bouwlaag uitstrekken, tenzij het voldoet aan specifieke uitzonderingen voor parkings, duplex-verbindingen (max 2500m²), triplex-verbindingen (max 300m² + detectie), technische lokalen of atria (met blusinstallatie en RWA)."@nl ;
    sh:or (
        # Basisregel: De hoogte stemt overeen met de hoogte van één bouwlaag.
        [
            sh:property [
                sh:path fbo:numberOfStoreys ;
                sh:hasValue 1 ;
                sh:minCount 1 ;
            ] ;
        ]
        # Uitzondering a: De parking met bouwlagen (zie 5.2)
        [
            sh:property [
                sh:path fbo:usage ;
                sh:hasValue fbo:ParkingUsage ;
            ] ;
        ]
        # Uitzondering b: Duplex (2 bouwlagen, binnenverbindingstrap, opp <= 2500 m²)
        [
            sh:and (
                [
                    sh:property [
                        sh:path fbo:numberOfStoreys ;
                        sh:hasValue 2 ;
                    ] ;
                ]
                [
                    sh:property [
                        sh:path fbo:hasInternalConnectionStairs ;
                        sh:hasValue true ;
                    ] ;
                ]
                [
                    sh:property [
                        sh:path fbo:totalFloorArea ;
                        sh:maxInclusive 2500 ;
                    ] ;
                ]
            ) ;
        ]
        # Uitzondering c: Triplex (3 bouwlagen, binnenverbindingstrap, opp <= 3000 m², totale branddetectie)
        [
            sh:and (
                [
                    sh:property [
                        sh:path fbo:numberOfStoreys ;
                        sh:hasValue 3 ;
                    ] ;
                ]
                [
                    sh:property [
                        sh:path fbo:hasInternalConnectionStairs ;
                        sh:hasValue true ;
                    ] ;
                ]
                [
                    sh:property [
                        sh:path fbo:totalFloorArea ;
                        sh:maxInclusive 3000 ;
                    ] ;
                ]
                [
                    sh:property [
                        sh:path fbo:hasAutomaticFireDetection ;
                        sh:hasValue true ;
                    ] ;
                ]
                [
                    sh:property [
                        sh:path fbo:fireDetectionType ;
                        sh:hasValue fbo:TotalMonitoring ;
                    ] ;
                ]
            ) ;
        ]
        # Uitzondering d: Enkel technische lokalen
        [
            sh:property [
                sh:path fbo:usage ;
                sh:hasValue fbo:TechnicalUsage ;
            ] ;
        ]
        # Uitzondering e: Atrium (meerdere bouwlagen, blusinstallatie en rook- en warmteafvoer)
        [
            sh:and (
                [
                    sh:property [
                        sh:path fbo:isAtrium ;
                        sh:hasValue true ;
                    ] ;
                ]
                [
                    sh:property [
                        sh:path fbo:hasAutomaticExtinguishingSystem ;
                        sh:hasValue true ;
                    ] ;
                ]
                [
                    sh:property [
                        sh:path fbo:hasSmokeAndHeatExhaustVentilation ;
                        sh:hasValue true ;
                    ] ;
                ]
            ) ;
        ]
    ) .