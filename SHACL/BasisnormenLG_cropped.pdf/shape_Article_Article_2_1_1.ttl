@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix fro: <https://ontology.firebim.be/ontology/fro#> .
@prefix fbo: <http://www.firebim.org/ontologies/FBO#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .

<https://ontology.firebim.be/ontology/fro#Article_2_1_1_Shape>
    a sh:NodeShape ;
    sh:targetClass fbo:Compartment ;
    sh:message "Het compartiment voldoet niet aan de eisen van Artikel 2.1.1 betreffende de maximale oppervlakte of lengte, rekening houdend met de mogelijke uitzonderingen (parking, gelijkvloers of actieve bescherming)."@nl ;
    sh:message "The compartment does not meet the requirements of Article 2.1.1 regarding maximum area or length, considering applicable exceptions (parking, ground floor, or active protection)."@en ;
    sh:or (
        # Exception: Parking lots (Section 5.2)
        [
            sh:property [
                sh:path fbo:isParking ;
                sh:hasValue true ;
            ]
        ]
        # Exception: Automatic Fire Suppression AND Smoke/Heat Exhaust (RWA)
        [
            sh:and (
                [
                    sh:property [
                        sh:path fbo:hasAutomaticFireSuppression ;
                        sh:hasValue true ;
                    ]
                ]
                [
                    sh:property [
                        sh:path fbo:hasSmokeHeatExhaust ;
                        sh:hasValue true ;
                    ]
                ]
            )
        ]
        # Rule for Ground-floor buildings consisting of a single compartment
        [
            sh:and (
                [
                    sh:property [
                        sh:path fbo:isGroundFloorOnly ;
                        sh:hasValue true ;
                    ]
                ]
                [
                    sh:property [
                        sh:path fbo:isSingleCompartmentBuilding ;
                        sh:hasValue true ;
                    ]
                ]
                [
                    sh:property [
                        sh:path fro:areaValue ;
                        sh:maxInclusive 3500 ;
                    ]
                ]
                [
                    sh:property [
                        sh:path fro:lengthValue ;
                        sh:maxInclusive 90 ;
                    ]
                ]
            )
        ]
        # General Rule: Area < 2500 m2
        [
            sh:property [
                sh:path fro:areaValue ;
                sh:maxExclusive 2500 ;
            ]
        ]
    ) .

# Link the rule URI to the shape
<https://ontology.firebim.be/ontology/fro#Article_2_1_1>
    a fro:RegulatoryRequirement ;
    fro:hasShape <https://ontology.firebim.be/ontology/fro#Article_2_1_1_Shape> .