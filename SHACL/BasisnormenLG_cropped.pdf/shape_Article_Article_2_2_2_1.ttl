@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix fro: <https://ontology.firebim.be/ontology/fro#> .
@prefix fbo: <http://www.firebim.org/ontologies/FBO#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .

<https://ontology.firebim.be/ontology/fro#Shape_Article_2_2_2_1>
    a sh:NodeShape ;
    sh:targetClass fro:Compartment ;
    rdfs:label "Shape for Article 2.2.2.1 - Exit and Evacuation Routes" ;
    # Requirement: Exits in opposite zones
    sh:property [
        sh:path fro:hasExit ;
        sh:minCount 2 ;
        sh:message "De uitgangen moeten in tegenovergestelde zones van het compartiment gelegen zijn (minstens 2 vereist)."@nl ;
    ] ;
    # Requirement: Evacuation routes leads to Outside, Stairwell, or Stair
    sh:property [
        sh:path ( fro:hasExit fro:leadsTo ) ;
        sh:or (
            [ sh:class fro:Outside ]
            [ sh:class fro:Stairwell ]
            [ sh:class fro:Stair ]
        ) ;
        sh:message "De evacuatiewegen moeten leiden naar buiten, naar trappenhuizen, of naar trappen."@nl ;
    ] ;
    # Requirement for Underground Storeys
    sh:property [
        sh:path ( fro:hasStorey ) ;
        sh:node [
            sh:rule [
                a sh:NodeShape ;
                sh:targetClass fro:UndergroundStorey ;
                sh:property [
                    sh:path fro:hasEvacuationRoute ;
                    sh:node [
                        sh:property [
                            sh:path fro:hasWall ;
                            sh:property [
                                sh:path fro:hasFireResistance ;
                                sh:hasValue "EI 30" ;
                            ] ;
                        ] ;
                        sh:property [
                            sh:path fro:hasDoor ;
                            sh:property [
                                sh:path fro:hasFireResistance ;
                                sh:hasValue "EI1 30" ;
                            ] ;
                        ] ;
                    ] ;
                ] ;
            ] ;
        ] ;
        sh:message "Wat de ondergrondse bouwlagen betreft, moet een evacuatieweg naar buiten wanden EI 30 en deuren EI1 30 hebben indien deze een trappenhuis vervangt."@nl ;
    ] ;
    # Requirement for Evacuation Levels
    sh:property [
        sh:path ( fro:hasStorey ) ;
        sh:node [
            sh:targetClass fro:EvacuationLevel ;
            sh:property [
                sh:path ( fro:hasStair ) ;
                sh:property [
                    sh:path fro:leadsTo ;
                    sh:class fro:Outside ;
                ] ;
            ] ;
        ] ;
        sh:message "Op een evacuatieniveau moet iedere trap naar buiten leiden, hetzij rechtstreeks, hetzij via een conforme evacuatieweg."@nl ;
    ] .

# Specific Shape for Underground Storey context
<https://ontology.firebim.be/ontology/fro#Shape_Article_2_2_2_1_Underground>
    a sh:NodeShape ;
    sh:targetClass fro:UndergroundStorey ;
    sh:property [
        sh:path fro:hasEvacuationRoute ;
        sh:node [
            sh:property [
                sh:path fro:hasWall ;
                sh:property [
                    sh:path fro:hasFireResistance ;
                    sh:hasValue "EI 30" ;
                ] ;
                sh:message "Wanden van evacuatiewegen in ondergrondse bouwlagen die leiden naar buiten moeten EI 30 zijn."@nl ;
            ] ;
            sh:property [
                sh:path fro:hasDoor ;
                sh:property [
                    sh:path fro:hasFireResistance ;
                    sh:hasValue "EI1 30" ;
                ] ;
                sh:message "Deuren in evacuatiewegen in ondergrondse bouwlagen die leiden naar buiten moeten EI1 30 zijn."@nl ;
            ] ;
        ] ;
    ] .

# Specific Shape for Evacuation Level stairs
<https://ontology.firebim.be/ontology/fro#Shape_Article_2_2_2_1_StairsOnEvacuationLevel>
    a sh:NodeShape ;
    sh:targetClass fro:Stair ;
    sh:property [
        sh:path ( [ sh:inversePath fro:hasStair ] ) ;
        sh:node [
            sh:class fro:EvacuationLevel ;
        ] ;
        sh:property [
            sh:path fro:leadsTo ;
            sh:class fro:Outside ;
            sh:message "Iedere trap op een evacuatieniveau moet naar buiten leiden."@nl ;
        ] ;
    ] .