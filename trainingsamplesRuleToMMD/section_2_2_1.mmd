flowchart TD
    S1["Start: Compartment Exit Check"] --> A["For each <a href='http://example.com/firebimbuilding#Compartment' style='color:pink;'>Compartment</a>"]
    A --> B["Get <a href='http://example.com/firebimbuilding#Occupancy' style='color:blue;'>Occupancy</a>"]
    B --> C["<a href='http://example.com/firebimbuilding#Occupancy' style='color:blue;'>Occupancy</a> < 100?"]
    C -- Yes --> D["<a href='http://example.com/firebimbuilding#MinimumNumberOfExits' style='color:blue;'>MinimumNumberOfExits</a> = 1"]
    C -- No --> E["100 ≤ <a href='http://example.com/firebimbuilding#Occupancy' style='color:blue;'>Occupancy</a> < 500?"]
    E -- Yes --> F["<a href='http://example.com/firebimbuilding#MinimumNumberOfExits' style='color:blue;'>MinimumNumberOfExits</a> = 2"]
    E -- No --> G["Calculate n = ceiling(<a href='http://example.com/firebimbuilding#Occupancy' style='color:blue;'>Occupancy</a> / 1000)"]
    G --> H["<a href='http://example.com/firebimbuilding#MinimumNumberOfExits' style='color:blue;'>MinimumNumberOfExits</a> = 2 + n"]
    D & F & H --> I["Get actual <a href='http://example.com/firebimbuilding#Exits' style='color:blue;'>Exits</a>"]
    I --> J["Actual <a href='http://example.com/firebimbuilding#Exits' style='color:blue;'>Exits</a> ≥ <a href='http://example.com/firebimbuilding#MinimumNumberOfExits' style='color:blue;'>MinimumNumberOfExits</a>?"]
    J -- Yes --> K["Check with fire department for <a href='http://example.com/firebimbuilding#AdditionalExitsRequired' style='color:blue;'>AdditionalExitsRequired</a>"]
    J -- No --> L[/"Fail"/]
    K --> M["<a href='http://example.com/firebimbuilding#AdditionalExitsRequired' style='color:blue;'>AdditionalExitsRequired</a> > 0?"]
    M -- Yes --> N["Update <a href='http://example.com/firebimbuilding#MinimumNumberOfExits' style='color:blue;'>MinimumNumberOfExits</a>"]
    N --> O["Actual <a href='http://example.com/firebimbuilding#Exits' style='color:blue;'>Exits</a> ≥ Updated <a href='http://example.com/firebimbuilding#MinimumNumberOfExits' style='color:blue;'>MinimumNumberOfExits</a>?"]
    O -- Yes --> P[/"Pass"/]
    O -- No --> Q[/"Fail"/]
    M -- No --> R[/"Pass"/]
    S1 --> S["For each <a href='http://example.com/firebimbuilding#Storey' style='color:pink;'>Storey</a> and <a href='http://example.com/firebimbuilding#Room' style='color:pink;'>Room</a>"]
    S --> T["Apply same exit calculation as for <a href='http://example.com/firebimbuilding#Compartment' style='color:pink;'>Compartment</a>"]
    T --> U["Actual <a href='http://example.com/firebimbuilding#Exits' style='color:blue;'>Exits</a> ≥ Updated <a href='http://example.com/firebimbuilding#MinimumNumberOfExits' style='color:blue;'>MinimumNumberOfExits</a>?"]
    U -- Yes --> V[/"Pass"/]
    U -- No --> W[/"Fail"/]

    S1:::startClass
    L:::failClass
    P:::passClass
    Q:::failClass
    R:::passClass
    V:::passClass
    W:::failClass

    classDef startClass fill:#f9f,stroke:#333,stroke-width:4px
    classDef passClass fill:#9f9,stroke:#333,stroke-width:2px
    classDef failClass fill:#f99,stroke:#333,stroke-width:2px