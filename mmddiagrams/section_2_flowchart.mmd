flowchart TD
    start([Start])
    style start fill:#FFC0CB,stroke:#000000,stroke-width:2px
    start --> get_building[Get `<font color='pink'>Building</font>`]
    get_building --> get_storeys[Get `<font color='pink'>Building</font>.<font color='blue'>Amount of storeys</font>`]
    get_storeys --> check_storeys{Is `<font color='blue'>Amount of storeys</font>` > 1?}
    check_storeys -->|Yes| get_compartments[Get all `<font color='pink'>Compartment</font>` objects]
    check_storeys -->|No| end([End])
    get_compartments --> loop_compartments[For each `<font color='pink'>Compartment</font>`]
    loop_compartments --> get_area[Get `<font color='pink'>Compartment</font>.<font color='blue'>Area</font>`]
    get_area --> check_area{Is `<font color='blue'>Area</font>` > 400 m2?}
    check_area -->|Yes| get_occupancy[Get `<font color='pink'>Compartment</font>.<font color='blue'>Occupancy</font>`]
    check_area -->|No| next_compartment[Next `<font color='pink'>Compartment</font>`]
    get_occupancy --> check_occupancy{Is `<font color='blue'>Occupancy</font>` > 50?}
    check_occupancy -->|Yes| get_exits[Get `<font color='pink'>Compartment</font>.<font color='blue'>Number of exits</font>`]
    check_occupancy -->|No| next_compartment
    get_exits --> check_exits{Is `<font color='blue'>Number of exits</font>` >= 2?}
    check_exits -->|Yes| pass_compartment[Compartment passes]
    check_exits -->|No| fail_compartment[Compartment fails]
    pass_compartment --> next_compartment
    fail_compartment --> next_compartment
    next_compartment --> check_more_compartments{More compartments?}
    check_more_compartments -->|Yes| loop_compartments
    check_more_compartments -->|No| end
    style get_building fill:#FFC0CB,stroke:#000000,stroke-width:2px
    style get_compartments fill:#FFC0CB,stroke:#000000,stroke-width:2px
    style loop_compartments fill:#FFC0CB,stroke:#000000,stroke-width:2px
    style next_compartment fill:#FFC0CB,stroke:#000000,stroke-width:2px
    style end fill:#FFC0CB,stroke:#000000,stroke-width:2px