graph TD
    start[Start] --> A{For each <font color='pink'>Building</font>}
    A --> |Yes| B{For each <font color='pink'>Compartment</font> in <font color='pink'>Building</font>}
    A --> |No| end[End]
    B --> |Yes| C{Check if <font color='pink'>Compartment</font> contains <font color='pink'>Lift</font>}
    B --> |No| A
    C --> |Yes| D{Check <font color='blue'>ventilation</font> of <font color='pink'>Lift</font> shaft and machine room}
    C --> |No| B
    D --> E{Is ventilation natural?}
    E --> |Yes| F{Check <font color='blue'>ventilation_openings</font> location}
    E --> |No| G{Check if lift design meets conditions}
    F --> H{Are <font color='blue'>ventilation_openings</font> in upper part?}
    H --> |Yes| I[Pass]
    H --> |No| J[Fail]
    G --> K{Does lift design meet case a) of 6.1.2.3?}
    G --> L{Does lift design meet case b) of 6.1.2.3?}
    K --> |Yes| M[Pass]
    K --> |No| L
    L --> |Yes| N{Check if floors not requiring 6.1.2.1 and 6.1.2.2 are above others}
    L --> |No| O[Fail]
    N --> |Yes| P[Pass]
    N --> |No| Q[Fail]
    I --> R{Check <font color='blue'>ventilation_opening_area</font>}
    M --> R
    P --> R
    R --> S{Is <font color='blue'>ventilation_opening_area</font> >= 1% of horizontal area?}
    S --> |Yes| T[Pass]
    S --> |No| U[Fail]
    T --> V{Check if <font color='blue'>ventilation_openings</font> have motorized flaps}
    V --> |Yes| W{Check flap control mechanisms}
    V --> |No| X[Pass]
    W --> Y{Automatic control for user ventilation?}
    W --> Z{Automatic control for abnormal temperature?}
    W --> AA{Automatic control for fire in shaft/machine room?}
    W --> AB{Automatic control for building fire detection?}
    W --> AC{Automatic control for power/control failure?}
    W --> AD{Manual control at evacuation level?}
    Y --> |Yes| Z
    Y --> |No| AE[Fail]
    Z --> |Yes| AA
    Z --> |No| AE
    AA --> |Yes| AB
    AA --> |No| AE
    AB --> |Yes| AC
    AB --> |No| AE
    AC --> |Yes| AD
    AC --> |No| AE
    AD --> |Yes| AF[Pass]
    AD --> |No| AE
    AF --> B
    X --> B
    J --> B
    O --> B
    Q --> B
    U --> B
    AE --> B

style start fill:#f9f,stroke:#333,stroke-width:2px
style end fill:#f9f,stroke:#333,stroke-width:2px
classDef object fill:#f9f,stroke:#333,stroke-width:2px;
classDef property fill:#ccf,stroke:#333,stroke-width:2px;
class Building,Compartment,Lift object;
class ventilation,ventilation_openings,ventilation_opening_area property;